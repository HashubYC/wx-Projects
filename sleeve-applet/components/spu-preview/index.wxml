<!--components/spu-preview/index.wxml-->
<wxs src="../../wxs/price.wxs" module="p"></wxs>

<view class="container">
    <!--
    第一种方法
    mode="widthFix" 动态计算
    看文档<image>
    -->
    <image mode="widthFix" class="img" src="{{data.img}}"></image>

    <!--第二种方法-->
<!--    <image bind:load="onImgLoad" style="width:{{w}}rpx;height:{{h}}rpx" src="{{data.img}}"></image>-->

    <view class="content-container">
        <text class="title">{{data.title}}</text>
        <!-- 标签组件 -->
        <view class="tags">
            <block wx:for="{{tags}}" wx:key="{{index}}">
                <!--
                l-class 外部样式类
                type="reading" 自动设置标签的背景长度
                -->
                <l-tag type="reading" l-class="l-tag" size="super-mini">{{item}}</l-tag>
            </block>
        </view>

        <view class="price-row">
            <l-price
                    color="#157658"
                    valueSize="28"
                    unitSize="20"
                    autofix="2"
                    value="{{p.mainPrice(data.price, data.discount_price).price}}"></l-price>

            <l-price
                    l-class="discount-price"
                    color="#999999"
                    size="26"
                    wx:if="{{p.slashedPrice(data.price, data.discount_price).display}}"
                    deleted="{{true}}"
                    value="{{p.slashedPrice(data.price, data.discount_price).price}}"></l-price>

        </view>

        <text class="subtitle">{{data.subtitle}}</text>
    </view>
</view>